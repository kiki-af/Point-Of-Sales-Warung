/*!
 * Point Of Sales Warung
 * Licensed under GPL (https://github.com/rezafikkri/Point-Of-Sales-Warung/blob/master/LICENSE)
 */
!function(){"use strict";document.querySelector('div.form-file input[type="file"]').addEventListener("change",(e=>{e.target.nextElementSibling.innerText=e.target.files[0].name}));const e=document.querySelector("div#magnitude-price");document.querySelector("a#add-form-input-magnitude-price").addEventListener("click",(t=>{t.preventDefault(),function(e){const t=document.createElement("div");t.classList.add("mt-3"),t.innerHTML='<div class="input-group">\n        <input class="form-input" type="text" placeholder="Besaran..." name="product_magnitudes[]">\n        <input class="form-input" type="number" placeholder="Harga..." name="product_prices[]">\n        <a class="btn btn--gray-outline" id="remove-form-input-magnitude-price" href="#">Hapus</a>\n    </div>',e.append(t)}(e)})),e.addEventListener("click",(e=>{const t=e.target;if("remove-form-input-magnitude-price"===t.getAttribute("id"))if(e.preventDefault(),void 0!==t.dataset.productPriceId){const e=document.querySelector("main.main").dataset.csrfName,n=document.querySelector(`input[name=${e}]`),r=n.value,a=t.dataset.productPriceId,i=document.querySelector("div.loading-bg");i.classList.remove("d-none"),fetch("/admin/hapus_harga_produk",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:`${e}=${r}&product_price_id=${a}`}).finally((()=>{i.classList.add("d-none")})).then((e=>e.json())).then((e=>{if(void 0!==e.csrf_value&&(n.value=e.csrf_value),!1===e.success&&void 0!==e.error_message){const t=function(e,t){const n=document.createElement("div");n.classList.add("alert");for(const t of e)n.classList.add(t);return n.innerHTML=`<span class="alert__icon"></span>\n    <p>${t}</p>\n    <a class="alert__close" href="#"></a>`,n}(["alert--warning","mb-3"],e.error_message);document.querySelector("main.main > div > div > div").insertBefore(t,document.querySelector("div.main__box"))}!0===e.success&&t.parentElement.parentElement.remove()})).catch((e=>{console.error(e)}))}else t.parentElement.parentElement.remove()}))}();
